"use strict";var App=App||{};$(window).on("hashchange",function(e){window.scrollBy(0,-$("#global-menu").height())}),function(){document.documentElement.setAttribute("data-useragent",navigator.userAgent);var e,n,t,i=$("base").attr("href"),a=$("#global-menu"),o=!1;function r(e,n){var t=$("body"),i=$("#keyword-search"),o=a.position().top+a.height();e&&!t.hasClass("with--globalsearch")?(t.addClass("with--globalsearch"),i.toggleClass("active"),i.css({display:"block",top:o}),$("#site-cache").css("top",o)):(t.removeClass("with--globalsearch"),i.removeClass("active"),i.css("display","none"),$("#site-cache").css("top",0)),n?t.toggleClass("with--sidebar"):t.removeClass("with--sidebar")}App.getBaseUrl=function(){return i},App.UBBannerSwap=function(){var e=!1,n=null,t=".ad-zone-swapper",i=".gpt-wrapper",a=[{size:1024,name:"desktop"},{size:768,name:"desktop"}],o=r();function r(){for(var e=document.body.clientWidth,n=0,t=a.length;n<t;n++)if(e>=a[n].size)return a[n];return{size:0,name:"mobile"}}function c(e){$(e+" "+i).each(function(){var e=t+"-"+o.name,n=$(this).parent().data("for");$(this).detach().appendTo(e+"[data-for="+n+"]")})}function s(){c(t),clearTimeout(n),n=setTimeout(function(){googletag.cmd.push(function(){googletag.pubads().refresh()})},250)}return{getCurrentBreakPoint:function(){return r()},swapBannerAfterward:function(e){c(e)},run:function(){var n=r();o.size!==n.size?(o=n,s()):e||(e=!0,s())}}}(),App.sendComScoreEvent=function(e){var n=Number(new Date);"undefined"!=typeof COMSCORE&&COMSCORE.beacon({c1:"2",c2:"17810411",c7:encodeURIComponent(e),c9:encodeURIComponent(window.document.referrer),cb:n}),$.ajax({method:"GET",url:"include/pv.xml?t="+n})},App.attachLazyLoadWaypoint=function(e){new Waypoint({element:e,handler:function(n){"down"===n&&(App.startLazyLoad(e),this.destroy())},offset:"100%"})},App.startLazyLoad=function(e){e.find("img").each(function(){var e=$(this),n=e.attr("data-src"),t=new Image;t.onload=function(){e.fadeOut(250,function(){e.attr("src",n)}).fadeIn(250)},t.src=n})},App.fixCarouselWidth=function(e){e.css("width",e.width()+20)},App.sendSkintestGAEvent=function(e){return ga("send","event",{eventCategory:"Skin Test Entry Point",eventAction:"Skin Test Entry Click",eventLabel:e}),!0},App.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),App.isCookieExist=function(e){return document.cookie.split(";").filter(function(n){return 0==n.trim().indexOf(e+"=")}).length},App.sendGAEvent=function(e,n,t){var i={};e&&(i.eventCategory=e),n&&(i.eventAction=n),t&&(i.eventLabel=t),ga("send","event",i)},App.handleBrokenImage=function(e){e.onerror=null,e.src="assets/img/responsive/placeholder.jpg",e.srcset="assets/img/responsive/placeholder.jpg"},function(){var e=$(".menu");function n(){var n=e.find(".hk-tagline").height(),t=e.find(".ul-branding").height(),i=$(window).height();e.find(".inner").css("height",i-t-n-20)}new Waypoint.Sticky({element:a[0]}),$("#navbarSideButton").click(function(){r(!1,!0)}),$("#close-mobile-menu").click(function(){r()}),$(window).resize(function(){var e=a.height();$(".sticky-wrapper").css("height",e);var t=window.outerWidth,i=$(this).scrollTop();!o&&t<=767?a.addClass("stuck"):t>=768&&0===i&&a.removeClass("stuck"),n()}),n()}(),e=$(".section-carousel"),n=null,e.owlCarousel({autoWidth:!0,nav:!0,dots:!1,mouseDrag:!0,touchDrag:!0,smartSpeed:200,navText:['<i class="fa fa-angle-left fa-2x"></i>','<i class="fa fa-angle-right fa-2x"></i>'],responsive:{0:{margin:35},320:{margin:28},375:{margin:18},425:{margin:34},768:{margin:35},940:{margin:35},1024:{margin:35},1170:{margin:35,nav:!1}},callbacks:!0,onInitialized:function(){n=e.find(".owl-stage"),App.fixCarouselWidth(n)},onResized:function(){App.fixCarouselWidth(n)}}),App.keywordSearch=function(){var e=$("#keywordsearch").val().trim();e&&(window.location=App.getBaseUrl()+"search?q="+encodeURIComponent(e.toString())+"&source=menu")},new autoComplete({selector:'input[name="keywordsearch"]',minChars:2,delay:250,source:function(e,n){try{t.abort()}catch(e){}t=$.getJSON("product/getSuggestions",{keyword:e},function(e){n(e.result)})}}),$("input[name=keywordsearch]").on("keyup",function(e){13===e.which&&(e.preventDefault(),App.keywordSearch())}),$("#search-keyword-btn").click(function(){r(!0)}),$("#close-mobile-search").click(function(){r()}),function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){document.querySelector(".site-container").classList.add("is-mobile"),document.querySelector("body").style.overflowX="hidden";var e=document.querySelector(".app-download-banner");e.style.display="block",e.style.top=document.querySelector("#global-menu").clientHeight+"px",e.querySelector("img").src="assets/img/temp/app-download-banner.gif",e.addEventListener("click",function(){App.sendGAEvent("App Download Top Banner",e.dataset.pageName,window.location.href)})}}(),$("#site-cache").click(function(){r()}),document.addEventListener("smartbanner.view",function(){o=!0,setTimeout(function(){Waypoint.refreshAll(),a.removeClass("stuck")},20),$(".smartbanner__button").click(function(e){e.preventDefault();var n=$(this).attr("href");ga("send","event",{eventCategory:"UL App Smart Banner",eventAction:"View Clicked",hitCallback:function(){location.href=n},hitCallbackFail:function(){location.href=n}})})}),function(){if(App.isCookieExist("skinId")){var e=document.querySelector(".dropdown-item.skintest-link");e&&(e.innerText="為您推薦")}}(),document.querySelector("#section-bar").addEventListener("click",function(e){var n=e.target;"A"!==n.tagName&&"IMG"!==n.tagName||App.sendGAEvent("Navigation Header Bar",n.innerText||n.alt)}),App.preview&&App.bannerControledByVue||($(window).resize(function(){App.UBBannerSwap.run()}),App.bannerWaitForMount||App.UBBannerSwap.run())}();